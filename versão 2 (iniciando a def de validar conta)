# -*- coding: utf-8 -*-
"""Untitled2.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1ozJpbBdKWF0higASFFrHM-GzkLTLrfwU
"""

# projetinho de paitaon

# variaveis para cadastrar cliente:
# primeiro nome
# ultimo nome
# cpf
# numero do cartão
# senha
# limite de crédito

# variaveis para cliente root:
# usuario
# senha
# limite de crédito

# variaveis para mostrar saldo:
# saldo
# valor das compras
# categoria das compras

# funções:
# subtrair valor da compra do limite de crédito
# cadastro de contas

# listas:
# categoria da compra com o valor dela
# contas

# não usar variaveis soltas, meter o metodo struct

# criar menu com opção para cadastrar cliente(usuario root), autorizar operação de crédito e mostrar saldo
def usuario_root():
    return str(input('Usuario: '))


def senha_root():
    return str(input('Senha: '))


def carregar_dados():
    from time import sleep
    print('Carregando', end='')
    # verificar se os dados existem
    if hasattr(cadcliente, 'cadcliente.primeiroNome') and callable(cadcliente.primeiroNome):
        print("Método 'x' existe")
    sleep(0.5)
    print('.', end='')
    sleep(0.5)
    print('.', end='')
    sleep(0.5)
    print('.')
    sleep(0.5)
    print('')


def menu_principal():
    print('-' * 27)
    print('| Bem vindo(a) ao CCBank! |')
    print('-' * 27)
    print('Opção (1): Acesso a Conta')
    print('Opção (2): Cadastro de novos clientes')
    print('Opção (3): Sair')
    return str(input('Opção: '))


def menu_conta():
    print('Opção (1): Operações de Crédito')
    print('Opção (2): Mostrar Saldo')
    print('Opção (3): Voltar')
    return str(input('Opção: '))


def menu_cadastro():
    print('Opção (1): Cadastrar Novo Cliente')
    print('Opção (2): Alterar limite de conta')
    print('Opção (3): Voltar')
    return str(input('Opção: '))


# as primeiras duas funções abaixo serviram para validação do cpf
def multip1(cpf):
    v1 = cpf[0] * 10
    v2 = cpf[1] * 9
    v3 = cpf[2] * 8
    v4 = cpf[3] * 7
    v5 = cpf[4] * 6
    v6 = cpf[5] * 5
    v7 = cpf[6] * 4
    v8 = cpf[7] * 3
    v9 = cpf[8] * 2
    soma = (v1 + v2 + v3 + v4 + v5 + v6 + v7 + v8 + v9)
    rest = soma % 11
    return rest


def multip2(cpf):
    v1 = cpf[0] * 11
    v2 = cpf[1] * 10
    v3 = cpf[2] * 9
    v4 = cpf[3] * 8
    v5 = cpf[4] * 7
    v6 = cpf[5] * 6
    v7 = cpf[6] * 5
    v8 = cpf[7] * 4
    v9 = cpf[8] * 3
    v10 = cpf[9] * 2
    soma = (v1 + v2 + v3 + v4 + v5 + v6 + v7 + v8 + v9 + v10)
    rest1 = soma % 11
    return rest1


# função pra tirar do limite
def subtrailimi(valorcompra):
    saldoatual = cliente.limite - valorcompra
    return saldoatual


# função para gerar numero de cartão aleatorio
def gerar_numcartao():
    from random import choice
    lista = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0']
    numcartao = choice(lista) + choice(lista) + choice(lista) + choice(lista) + ' ' + choice(lista) + choice(
        lista) + choice(lista) + choice(lista) + ' ' + choice(lista) + choice(lista) + choice(lista) + choice(
        lista) + ' ' + choice(lista) + choice(lista) + choice(lista) + choice(lista)
    return numcartao


def subtrailimi(limite, valorcompra):
    saldoatual = limite - valorcompra
    return saldoatual


def sucesso(valorvar, catransporte, catmercado, catfarmacia, catcompras, catcasa, catcomu, catdiversao, catCATiorro,
            catoutro):
    if valorvar == 1:
        print('Compra alocada na categoria: Mercado')
        catmercado = catmercado + valorcompra
        print(catmercado)
        return catmercado
    elif valorvar == 2:
        catfarmacia = catfarmacia + valorcompra
        print('Compra alocada na categoria: Saúde')
        return catfarmacia
    elif valorvar == 3:
        catransporte = catransporte + valorcompra
        print('Compra alocada na categoria: Transporte')
        return catransporte
    elif valorvar == 4:
        catdiversao = catdiversao + valorcompra
        print('Compra alocada na categoria: Atividade recreativa')
        return catdiversao
    elif valorvar == 5:
        catCATiorro = catCATiorro + valorcompra
        print('Compra alocada na categoria: Gastos com animal de estimação')
        return catCATiorro
    elif valorvar == 6:
        catcomu = catcomu + valorcompra
        print('Compra alocada na categoria: Comunicação')
        return catcomu
    elif valorvar == 7:
        catcasa = catcasa + valorcompra
        print('Compra alocada na categoria: Casa')
        return catcasa
    elif valorvar == 8:
        catoutro = catoutro + valorcompra
        print('Compra alocada na categoria: Outros')
        return catoutro
    else:
        print('Categoria inexistente. Contate nossos desenvolvedores para mais informações :) ')


def catcompras():
    return int(input(
        'Em qual das seguintes categorias você deseja alocar sua compra? \n 1 - Mercado \n 2 - Saúde \n 3 - Transporte \n 4 - Atividade recreativa \n '
        '5 - Gastos com animal de estimação \n 6 - Comunicação \n 7 - Casa \n 8 - Outros \n'))

#verifica conta
def verificaconta(senha,primeiroNome):
    #pegar e rodar a vaariavel 
#usuariocliente.nome = str(input('Nome: '))
#usuariocliente.senha = str(input('Senha: '))
#if usuariocliente.nome == cliente.nome and usuariocliente.senha == cliente.senha:
#AQUI VAI O FOR PRA REALIZAR A VERIFICAÇÃO DE LOGIN    
#print(f'Seja bem vindo(a), {usuariocliente.nome}')
    for x in range len(cadcliente):










# variaveis para usuario cliente
class usercliente:
    numcartao = ''
    senha = ''
    nome = ''
    conta = 0


# variaveis do usuario root
class useroot:
    usuario = ''
    senha = ''
    usuarioCorreto = '1'
    senhaCorreta = '1'


# variaveis cadastro do cliente novo, que só pode ser feito pelo root
class cadcliente:
    primeiroNome = ''
    segundoNome = ''
    cpfCliente = ''
    numCartao = ''
    numscartao = []
    senha = ''
    limite = 0
    confirma = ''


# variaveis de operações de credito
saldoatual=0.0
catmercado = 0
numcat = 0
semcat = 0.0
arrcat = 0
valorcompra = 0.0
catmercado = 0.0
catdiversao = 0.0
catCATiorro = 0.0
catransporte = 0.0
catfarmacia = 0.0
catoutro = 0.0
catcasa = 0.0
catcomu = 0.0
valor = 0.0
saldo = 0
c = 0
compra = 0
categoria = ''

variavelmenu1 = 0
menuprincipal = menu_principal()
usuariocliente = usercliente()
cliente = cadcliente()  # Cria uma variável tipo
while variavelmenu1 != 3:
    if menuprincipal == '1':
        print('-' * 18)
        print('| Acesso a Conta |')
        print('-' * 18)
        cliente.primeiroNome = str(input('1 º Nome: '))
        cliente.senha = str(input('Senha: '))
        if usuariocliente.nome == cliente.nome and usuariocliente.senha == cliente.senha:
        #AQUI VAI O FOR PRA REALIZAR A VERIFICAÇÃO DE LOGIN    
            print(f'Seja bem vindo(a), {usuariocliente.nome}')
            menuconta = 0
            while menuconta != '1' and menuconta != '2' and menuconta != '3':
                menuconta = menu_conta()
                if menuconta == '1':
                    print('-' * 24)
                    print('| Operações de Crédito |')
                    print('-' * 24)
                    valorcompra = float(input('Insira o valor da compra: '))
                    if cliente.limite < valorcompra:
                        print('Compra negada por falta de limite.')
                    else:
                        print('Compra aprovada!')
                        subtrailimi(cliente.limite,valorcompra)
                        esc1 = int(input('Gostaria de inserir uma categoria para a compra? \n (1) Sim \n (2) Não \n'))
                        if esc1 == 1:
                            valorvar = catcompras()
                            if valorvar == 1:
                                print('Compra alocada na categoria: Mercado')
                                catmercado = catmercado + valorcompra
                                print(catmercado)
                            elif valorvar == 2:
                                catfarmacia = catfarmacia + valorcompra
                                compra = valorcompra
                                print('Compra alocada na categoria: Saúde')
                            elif valorvar == 3:
                                catransporte = catransporte + valorcompra
                                print('Compra alocada na categoria: Transporte')
                            elif valorvar == 4:
                                catdiversao = catdiversao + valorcompra
                                print('Compra alocada na categoria: Atividade recreativa')
                            elif valorvar == 5:
                                catCATiorro = catCATiorro + valorcompra
                                print('Compra alocada na categoria: Gastos com animal de estimação')
                            elif valorvar == 6:
                                catcomu = catcomu + valorcompra
                                print('Compra alocada na categoria: Comunicação')
                            elif valorvar == 7:
                                catcasa = catcasa + valorcompra
                                print('Compra alocada na categoria: Casa')
                            elif valorvar == 8:
                                catoutro = catoutro + valorcompra
                                print('Compra alocada na categoria: Outros')
                            else:
                                print('Categoria inexistente. Contate nossos desenvolvedores para mais informações :) ')

                        elif esc1 == 2:
                            arrcat = int(input(
                                'Nenhuma categoria selecionada.Você tem certeza disso? \n 1 - Sim \n 2 - Voltar e adicionar categoria \n'))
                            if arrcat == 2:
                                valorvar = catcompras()
                                valorcat = sucesso(valorvar, catransporte, catfarmacia, catcompras, catcasa, catcomu,
                                                   catdiversao, catCATiorro, catoutro)
                                # isso devia trazer de volta as operações de categoria
                            else:
                                print('tudo bem')
                                semcat = semcat + valorcompra
                        else:
                            print('Hmmm, você achou um bug? NÃO RESPONDA!')

                if menuconta == '2':
                    print('-' * 13)
                    print('| Seu Saldo |')
                    print('-' * 13)
                    #subtrailimi traz o saldoatual
                    valor_gasto = (cliente.limite - saldoatual)
                    print('Quanto você já gastou: %f',saldoatual)
                    print('Seu limite total é de %f',cliente.limite)
                    print('O valor gasto até agora é de %f',valor_gasto)
                    print('Seus gastos por categoria são os seguintes:')
                    print('Mercado: %f',catmercado)
                    print('Saúde: %f',catfarmacia)
                    print('Transporte: %f',catransporte)
                    print('Casa: %f',catcasa)
                    print('Comunicação: %f',catcomu)
                    print('Atividades recreativas: %f',catdiversao)
                    print('Gastos com animal de estimação: %f',catCATiorro)
                    print('Outros: %f',catoutro)
                    print('Compras que você optou por não classificar em categorias: %f ',semcat)
                if menuconta == '3':
                    menuprincipal = menu_principal()
                if menuconta != '1' and menuconta != '2' and menuconta != '3':
                    print('!!!OPÇÃO INVÁlIDA!!!')
        else:
            print('usuario ou senha inválido!')
            print('Retornando ao menu principal')
            menuprincipal = menu_principal()
    if menuprincipal == '2':
        print('-' * 27)
        print('| Cadastrar novo cliente |')
        print('-' * 27)
        usuarioroot = ''
        senharoot = ''
        root = useroot()
        while usuarioroot != root.usuarioCorreto or senharoot != root.senhaCorreta:
            usuarioroot = usuario_root()
            senharoot = senha_root()
            if usuarioroot == root.usuarioCorreto and senharoot == root.senhaCorreta:
                print('-' * 17)
                print('| Cadastramento |')
                print('-' * 17)
                menucadastro = ''
                while menucadastro != '1' and menucadastro != '2':
                    menucadastro = menu_cadastro()
                    if menucadastro == '1':
                        # Utilizar a estrutura (classe) nas variaveis abaixo
                        cliente.primeiroNome = str(input('Primeiro Nome: '))
                        cliente.segundoNome = str(input('Ultimo Nome: '))
                        cliente.cpfCliente = (input('CPF: '))
                        cpf = list(map(int, cliente.cpfCliente))
                        rest = multip1(cpf)
                        if rest < 2:
                            rest = 0
                            if rest == cpf[9]:
                                rest1 = multip2(cpf)
                                if rest1 < 2:
                                    rest1 = 0
                                    if rest1 == cpf[10]:
                                        print('CPF válido')
                                    else:
                                        cliente.cpfCliente = int(input('11º dígito incorreto. CPF inválido. '
                                                                       'Insira de novo'))
                                else:
                                    rest1 = 11 - rest1
                                    if rest1 == cpf[10]:
                                        print('11º dígito correto. CPF válido')
                                    else:
                                        cliente.cpfCliente = int(input('CPF inválido. Insira de novo'))
                            else:
                                cliente.cpfCliente = int(input('10º digito inválido.Insira de novo.'))
                        else:
                            rest = 11 - rest
                            if rest == cpf[9]:
                                rest1 = multip2(cpf)
                                if rest1 < 2:
                                    rest1 = 0
                                    if rest1 == cpf[10]:
                                        print('11º digito correto. CPF válido')
                                    else:
                                        cliente.cpfCliente = int(input('11º digito inválido.Insira novamente'))
                                else:
                                    rest1 = 11 - rest1
                                    if rest1 == cpf[10]:
                                        print('11º digito correto. CPF válido')
                                    else:
                                        cliente.cpfCliente = int(input('11º digito inválido.Insira novamente'))

                            else:
                                cliente.cpfCliente = int(input('10º dígito inválido. Insira novamente'))
                        cliente.numscartao = gerar_numcartao()
                        if gerar_numcartao() not in cliente.numscartao:
                            cliente.numCartao = gerar_numcartao()
                        else:
                            while gerar_numcartao() in cliente.numscartao:
                                cliente.numscartao = gerar_numcartao()
                                if gerar_numcartao() not in cliente.numscartao:
                                    cliente.numCartao = gerar_numcartao()
                        cliente.senha = str(input('Informe a senha escolhida: '))
                        # validação da senha de 6 digitos
                        if len(cliente.senha) == 6:
                            cliente.senha = cliente.senha
                        else:
                            while len(cliente.senha) != 6:
                                print('Informe uma senha com apenas 6 digitos!')
                                cliente.senha = str(input('Informe a senha escolhida: '))
                                if len(cliente.senha) == 6:
                                    cliente.senha = cliente.senha
                        valorlimite = float(input('Informe o limite total para o cartão: R$'))
                        # validação para o limite
                        if 0 < valorlimite < 999999:
                            cliente.limite = valorlimite
                        else:
                            while cliente.limite < 0 or cliente.limite > 999999:
                                print('Informe um valor entre 0 e 999999!')
                                cliente.limite = float(input('Informe o limite total para o cartão: R$'))
                                if 0 < cliente.limite < 999999:
                                    cliente.limite = cliente.limite
                        usercliente.conta = [cliente.primeiroNome, cliente.segundoNome, cliente.cpfCliente, cliente.numCartao,
                                 cliente.senha, cliente.limite]
                        print('Confirme os dados abaixo: ')
                        print(f'Primeiro Nome: {usercliente.conta[0]}')
                        print(f'Ultimo Nome: {usercliente.conta[1]}')
                        print(f'CPF: {usercliente.conta[2]}')
                        print(f'N° do Cartão: {usercliente.conta[3]}')
                        print(f'Senha: {usercliente.conta[4]}')
                        print(f'Limite: R${usercliente.conta[5]}')
                        cliente.confirma = str(input('Dados corretos? Informe S para sim e N para não: ')).upper()
                        if cliente.confirma == 'S':
                            menuprincipal = menu_principal()
                        elif cliente.confirma == 'N':
                            menucadastro = menu_cadastro()
                        else:
                            while cliente.confirma != 'S' and cliente.confirma != 'S':
                                print('Dado inválido')
                                cliente.confirma = str(input('Dados corretos? Informe S para sim e N para não: ')).upper()
                                if cliente.confirma == 'S':
                                    menuprincipal = menu_principal()
                                elif cliente.confirma == 'N':
                                    menucadastro = menu_cadastro()
                    if menucadastro == '2':
                        cliente.limite = float(input('Informe o novo limite para a conta: '))
                        if usercliente.conta == 0:
                            print('Cadastre um cliente antes!')
                            menuprincipal = menu_principal()
                        else:
                            usercliente.conta[5] = cliente.limite
                            print('Confirme o limite abaixo: ')
                            print(f'Limite: R${usercliente.conta[5]}')
                            cliente.confirma = str(input('Limite correto? Informe S para sim e N para não: ')).upper()
                            if cliente.confirma == 'S':
                                menuprincipal = menu_principal()
                            elif cliente.confirma == 'N':
                                menucadastro = menu_cadastro()
                            else:
                                while cliente.confirma != 'S' and cliente.confirma != 'S':
                                    print('Dado inválido')
                                    cliente.confirma = str(input('Limite correto? Informe S para sim e N para não: ')).upper()
                                    if cliente.confirma == 'S':
                                        menuprincipal = menu_principal()
                                        saldo += 1
                                    elif cliente.confirma == 'N':
                                        menucadastro = menu_cadastro()
                    if menucadastro == '3':
                        menuprincipal = menu_principal()
                    if menucadastro != '1' and menucadastro != '2' and menucadastro != '3':
                        print('!!!OPÇÃO INVÁlIDA!!!')
            else:
                print('usuario ou senha incorreto!')
                usuarioroot = usuario_root()
                senharoot = senha_root()
    if menuprincipal == '3':
        print('Agradecemos pela preferencia!')
        break
